<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
    xmlns:tal="http://xml.zope.org/namespaces/tal"
    xmlns:metal="http://xml.zope.org/namespaces/metal"
    xmlns:i18n="http://xml.zope.org/namespaces/i18n"
    lang="en"
    metal:use-macro="context/main_template/macros/master"
    i18n:domain="s17.employee">
  <body>

    <metal:main fill-slot="main">
      <tal:main-macro metal:define-macro="main">

        <div tal:replace="structure provider:plone.abovecontenttitle" />

        <div tal:replace="structure provider:plone.belowcontenttitle" />

        <div tal:replace="structure provider:plone.abovecontentbody" />

        <dl class="portalMessage info"
            tal:condition="not:view/check_member">
            <dt i18n:translate="">Information</dt>
            <dd i18n:translate="">There is not a Plone user attached to this employee.</dd>
        </dl>

        <h1 id="employee_title" class="documentFirstHeading">
            <span tal:replace="context/title" />
            <span
                tal:define="user_name python:view.w.get('IPloneUser.user_name');
                            user_name python:user_name and user_name.render().strip() or ''"
                tal:condition="user_name"
                tal:content="structure python:'(%s)' % user_name" />
        </h1>

        <table id="employee-main-info"
               tal:define="view_widget python:view.w;
                           base_keys view/base_sorted_keys;
                           contact_keys view/contact_sorted_keys;
                           companyinfo_keys view/companyinfo_sorted_keys">

            <tr tal:condition="python:base_keys" class="subsection" tal:repeat="field base_keys">
                <td tal:define="key python:field.keys()[0]"
                    tal:content="python:view_widget[key].label" />
                <td tal:define="key python:field.keys()[0]" tal_attributes="id key"
                    tal:content="structure python: view_widget[key].render()" />
            </tr>
            <tr class="type_info">
                <td colspan="2"><h3 i18n:translate=""> Contacts </h3></td>
            </tr>
            <tr tal:condition="python:contact_keys" class="subsection" tal:repeat="field contact_keys">
                <td tal:define="key python:field.keys()[0]"
                    tal:content="python:view_widget[key].label" />
                <td tal:define="key python:field.keys()[0]" tal_attributes="id key">
                    <div tal:repeat="item python:view_widget[key].value" >
                        <span tal:content="python: item['data']" />
                    </div>
                </td>
            </tr>

            <tr class="type_info">
                <td colspan="2"><h3 i18n:translate=""> Company Information </h3></td>
            </tr>

            <tr tal:condition="python:companyinfo_keys" class="subsection" tal:repeat="field companyinfo_keys">
                <td tal:define="key python:field.keys()[0]"
                    tal:content="python:view_widget[key].label" />
                <td tal:define="key python:field.keys()[0]" tal_attributes="id key"
                    tal:content="structure python: view_widget[key].render()" />
            </tr>
        </table>

        <img id="image"
              tal:attributes="src string:${context/absolute_url}/@@images/picture/"
          />


        <div class="field person-biography" tal:condition="view/biography">
          <h3 i18n:translate="">Biography</h3>
          <div tal:content="view/biography" />
        </div>

        <div tal:replace="structure provider:plone.belowcontentbody" />

      </tal:main-macro>
    </metal:main>

  </body>
</html>
